<ion-content [fullscreen]="true" class="relative">
  <!-- Settings Button -->
  <div class="absolute top-4 left-4 z-10">
    <button
      (click)="navigateToSettings()"
      class="p-2 bg-[#efede8] rounded-full hover:bg-[#dfddd8] transition-colors"
    >
      <img
        src="../../assets/emojis/gear.png"
        alt="Settings"
        width="24"
        height="24"
      />
    </button>
  </div>

  <!-- Main Content -->
  <div class="flex flex-col items-center justify-center min-h-[calc(100vh-80px)] px-4 pb-8 dark:bg-[#374151]">
    <div class="w-full max-w-md md:max-w-xl space-y-5 py-4">
      <!-- Logo -->
      <div class="flex justify-center">
        <div class="logo" style="transform: rotate(-15deg)">
          <span class="text-3xl md:text-4xl font-bold text-[#1d1d1c] dark:text-white">سويتش</span>
          <div class="logo-icon"></div>
        </div>
      </div>

      <!-- Intensity -->
      <div class="px-2">
        <h2 class="text-base md:text-lg font-semibold mb-2 text-[#1d1d1c] dark:text-white">نسبة الحماس</h2>
        <div class="flex flex-wrap justify-center gap-2">
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="intensity" value="low" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              منخفض
              <img src="../../assets/emojis/downcast-face-with-sweat_1f613.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="intensity" value="mid" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              متوسط
              <img src="../../assets/emojis/face-with-raised-eyebrow_1f928.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="intensity" value="full" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              مرتفع
              <img src="../../assets/emojis/star-struck_1f929.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
        </div>
      </div>

      <!-- Duration -->
      <div class="px-2">
        <h2 class="text-base md:text-lg font-semibold mb-2 text-[#1d1d1c] dark:text-white">الوقت المتوفر</h2>
        <div class="flex flex-wrap justify-center gap-2">
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="duration" value="5min" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              5 دقائق
              <img src="../../assets/emojis/alarm-clock_23f0.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="duration" value="10min" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              10 دقائق
              <img src="../../assets/emojis/hourglass-done_231b.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="duration" value="10plus" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              +10 دقائق
              <img src="../../assets/emojis/mantelpiece-clock_1f570-fe0f.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
        </div>
      </div>

      <!-- Type -->
      <div class="px-2">
        <h2 class="text-base md:text-lg font-semibold mb-2 text-[#1d1d1c] dark:text-white">نوع النشاط</h2>
        <div class="flex flex-wrap justify-center gap-2">
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="type" value="internal" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              داخلي
              <img src="../../assets/emojis/house_1f3e0.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
          <label class="min-w-[150px] flex-1">
            <input type="radio" name="type" value="external" class="custom-radio sr-only"/>
            <span class="flex items-center justify-center p-2 rounded-md cursor-pointer transition-colors bg-[#efede8] text-gray-700 hover:bg-gray-200 w-full text-sm md:text-base">
              خارجي
              <img src="../../assets/emojis/person-running_medium-light-skin-tone_1f3c3-1f3fc_1f3fc.png" width="20" height="20" class="ms-2"/>
            </span>
          </label>
        </div>
      </div>

      <!-- Buttons -->
      <div class="px-2 space-y-3 mt-6">
        <div class="flex justify-center">
          <button
            #submitBtn
            (click)="getActivity('submit')"
            class="w-full max-w-xs px-6 py-3 bg-primary text-white rounded-md text-lg font-semibold hover:bg-primary/90 active:bg-primary/80 transition-colors"
          ></button>
        </div>
        
        <div class="flex justify-center">
          <button
            #randomSubmitBtn
            (click)="getActivity('random')"
            class="w-full max-w-xs px-6 py-3 bg-[#efede8] text-gray-700 rounded-md text-lg font-semibold hover:text-white hover:bg-primary/90 active:bg-primary/80 transition-colors"
          >
            اقترح لي عشوائيًا
            <img src="../../assets/emojis/sparkles.png" width="20" height="20" class="ms-1 inline align-middle"/>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Activity Modal -->
  <div *ngIf="showActivityModal" class="fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4">
    <div
    [ngClass]="{
      'opacity-100 translate-y-0 scale-100': modalVisible,
      'opacity-0 translate-y-8 scale-95': !modalVisible
    }"
    class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out"
  >
      <!-- Modal Header -->
      <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">النشاط المقترح</h3>
        <button 
          (click)="closeActivityModal()"
          class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <!-- Modal Content -->
      <div class="p-6 overflow-y-auto flex-1">
        <div class="space-y-6">
          <div>
            <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2">النشاط:</h4>
            <p class="text-xl font-bold text-primary dark:text-[#ffc00a]">{{ selectedActivity?.activity }}</p>
          </div>
          
          <div class="flex justify-between items-center">
            <div>
              <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2">النوع:</h4>
              <div class="flex items-center">
                <span class="px-3 py-1 rounded-full text-sm font-medium"
                  [class.bg-blue-100]="selectedActivity?.type === 'internal'"
                  [class.text-blue-800]="selectedActivity?.type === 'internal'"
                  [class.bg-green-100]="selectedActivity?.type === 'external'"
                  [class.text-green-800]="selectedActivity?.type === 'external'"
                >
                  {{ selectedActivity?.type === 'internal' ? 'داخلي' : 'خارجي' }}
                </span>
                <img 
                  [src]="selectedActivity?.type === 'internal' ? '../../assets/emojis/house_1f3e0.png' : '../../assets/emojis/person-running_medium-light-skin-tone_1f3c3-1f3fc_1f3fc.png'" 
                  width="24" 
                  height="24" 
                  class="ms-2"
                >
              </div>
            </div>
            <div>
              <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2">المكان المقترح:</h4>
              <p class="text-gray-800 dark:text-gray-200 leading-relaxed">{{ selectedActivity?.locationTips }}</p>
            </div>
          </div>
          
          <div>
            <h4 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2">الوصف:</h4>
            <p class="text-gray-800 dark:text-gray-200 leading-relaxed">{{ selectedActivity?.desc }}</p>
          </div>
        </div>
      </div>
      
      <!-- Modal Footer -->
      <div class="p-4 border-t dark:border-gray-700 flex justify-end">
        <button
          (click)="closeActivityModal()"
          class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors"
        >
          حسناً
        </button>
      </div>
    </div>
  </div>

  <!-- Wave SVG -->
  <div class="absolute bottom-0 left-0 w-full z-0">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 1440 320"
      class="w-full h-[80px] md:h-[100px] dark:bg-[#374151]"
      preserveAspectRatio="none"
    >
      <path
        class="fill-[#ffc00a]"
        fill-opacity="1"
        d="M0,32L48,53.3C96,75,192,117,288,112C384,107,480,53,576,48C672,43,768,85,864,96C960,107,1056,85,1152,90.7C1248,96,1344,128,1392,144L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
      ></path>
    </svg>
  </div>
</ion-content>